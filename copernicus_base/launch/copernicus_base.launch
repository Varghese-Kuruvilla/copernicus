<?xml version="1.0"?>
<launch>
    <node name="SerialComm" pkg="rosserial_python" type="serial_node.py">
      <param name="port" value="/dev/ttyACM1" />
      <param name="baud" value="57600" />
    </node>

    <node name="copernicus_base_node" pkg="copernicus_base" type="copernicus_base_node">
    </node>

    <group>
        <node pkg="um7" type="um7_driver" name="imu_driver">
            <param name="port" value="/dev/ttyUSB0"/>
            <param name="mag_updates" value="false"/>
            <param name="tf_ned_to_enu" value="false"/>
            <param name="frame_id" value="imu_link_ned"/>

            <remap from="imu" to="imu/ned"/>
        </node>

        <node pkg="tf" type="static_transform_publisher" name="tf_imu_ned_enu"
        args="0 0 0 1.5708 0 3.1416 imu_link_ned imu_link 10" output="screen"/>

        <node pkg="imu_transformer" type="imu_transformer_node" name="imu_data_transformer" output="screen">
            <remap from="imu_in" to="imu/ned"/>
            <remap from="imu_out" to="imu/enu"/>
            <param name="target_frame" value="base_link"/>
        </node>

        <node pkg="imu_filter_madgwick" type="imu_filter_node" name="imu_filter">
            <remap from="imu/data_raw" to="imu/enu/data"/>
            <rosparam>
                use_mag: false
                mag_bias_x: 0
                mag_bias_y: 0
                mag_bias_z: 0
                orientation_stddev: 0.001
                gain: 0.01
                zeta: 0.001
                publish_tf: false
            </rosparam>
        </node>

    </group>

    <group>
        <node pkg="lms1xx" name="lms1xx" type="LMS1xx_node">
	    <param name="host" value="10.0.1.11" />
	    <param name="frame_id" value="lidar" />
	</node>
    </group>

</launch>
